<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TikTok 评论获取器 - 快速获取任意 TikTok 视频的所有评论">
    <title>TikTok 评论获取器</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 背景装饰 -->
    <div class="background-decoration">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 22C9 22 8 22 8 21C8 20 9 16 13 16C17 16 18 20 18 21C18 22 17 22 17 22H9Z" fill="currentColor"/>
                    <path d="M13 8C14.6569 8 16 6.65685 16 5C16 3.34315 14.6569 2 13 2C11.3431 2 10 3.34315 10 5C10 6.65685 11.3431 8 13 8Z" fill="currentColor"/>
                </svg>
                <h1>TikTok 评论获取器</h1>
            </div>
            <p class="subtitle">轻松获取任意 TikTok 视频的所有评论数据</p>
        </header>

        <!-- 输入区域 -->
        <section class="input-section">
            <div class="input-container">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 6H14C14 4.89543 13.1046 4 12 4C10.8954 4 10 4.89543 10 6Z" fill="currentColor"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3 7C3 5.89543 3.89543 5 5 5H7V7H5V19H19V7H17V5H19C20.1046 5 21 5.89543 21 7V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V7Z" fill="currentColor"/>
                    </svg>
                    <textarea
                        id="videoUrls"
                        class="url-textarea"
                        placeholder="粘贴多个 TikTok 视频链接，每行一个&#10;例如:&#10;https://www.tiktok.com/@username/video/1234567890&#10;https://www.tiktok.com/@user2/video/0987654321"
                        rows="4"
                        autocomplete="off"
                    ></textarea>
                    <button id="clearBtn" class="clear-btn" title="清除">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
                <div class="input-info">
                    <span id="urlCount" class="url-count">已输入 0/10 个视频链接</span>
                    <button id="fetchBtn" class="fetch-btn">
                        <span class="btn-text">批量获取评论</span>
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5 3L19 8.5M13.5 3L13.5 8C13.5 8.27614 13.7239 8.5 14 8.5H18.5M13.5 3H7C5.89543 3 5 3.89543 5 5V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V8.5M13.5 3H18.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- 示例链接 -->
            <div class="example-links">
                <span class="example-label">示例:</span>
                <button class="example-link" data-url="https://www.tiktok.com/@fishereffect/video/7563463737844174093">
                    添加示例视频
                </button>
            </div>
        </section>

        <!-- 加载动画 -->
        <div id="loading" class="loading-container hidden">
            <div class="spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <p class="loading-text">正在获取评论数据...</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p class="progress-text" id="progressText">准备中...</p>
            </div>
        </div>

        <!-- 错误提示 -->
        <div id="error" class="error-container hidden">
            <div class="error-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 8V12M12 16H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <p class="error-text" id="errorMessage"></p>
            <button class="retry-btn" id="retryBtn">重新尝试</button>
        </div>

        <!-- 结果区域 -->
        <section id="results" class="results-section hidden">
            <!-- 统计信息 -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 10H8.01M12 10H12.01M16 10H16.01M9 16H5C3.89543 16 3 15.1046 3 14V6C3 4.89543 3.89543 4 5 4H19C20.1046 4 21 4.89543 21 6V14C21 15.1046 20.1046 16 19 16H14L9 21V16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">总视频数</p>
                        <p class="stat-value" id="totalVideos">0</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 10H8.01M12 10H12.01M16 10H16.01M9 16H5C3.89543 16 3 15.1046 3 14V6C3 4.89543 3.89543 4 5 4H19C20.1046 4 21 4.89543 21 6V14C21 15.1046 20.1046 16 19 16H14L9 21V16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">总评论数</p>
                        <p class="stat-value" id="totalComments">0</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 8H17M7 12H11M7 16H13M3 5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V15C21 16.1046 20.1046 17 19 17H13L7 21V17H5C3.89543 17 3 16.1046 3 15V5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">成功率</p>
                        <p class="stat-value" id="successRate">0%</p>
                    </div>
                </div>
            </div>

            <!-- 操作按钮 -->
            <div class="action-buttons">
                <button class="action-btn excel-btn" id="exportExcelBtn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 18H17V16H7V18ZM7 14H17V12H7V14ZM7 10H17V8H7V10ZM5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H15L21 9V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5ZM14 10V5H5V19H19V10H14Z" fill="currentColor"/>
                    </svg>
                    导出 Excel
                </button>
                <button class="action-btn secondary" id="clearResultsBtn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 7L18.1327 19.1425C18.0579 20.1891 17.187 21 16.1378 21H7.86224C6.81296 21 5.94208 20.1891 5.86732 19.1425L5 7M10 11V17M14 11V17M15 7V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V7M4 7H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    清空结果
                </button>
            </div>

            <!-- 表格展示区域 -->
            <div class="table-section">
                <div class="table-header">
                    <h2>视频评论对比表</h2>
                    <div class="table-controls">
                        <button class="toggle-scroll-btn" id="toggleScrollBtn" title="切换滚动方向">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 12H16M12 8V16M3 12C3 12 5 16 12 16C19 16 21 12 21 12C21 12 19 8 12 8C5 8 3 12 3 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="table-container" id="tableContainer">
                    <table class="videos-table" id="videosTable">
                        <thead>
                            <tr>
                                <th>视频信息</th>
                                <!-- 动态生成视频列标题 -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="url-row">
                                <td>URL</td>
                                <!-- 动态生成URL -->
                            </tr>
                            <tr class="video-id-row">
                                <td>视频ID</td>
                                <!-- 动态生成视频ID -->
                            </tr>
                            <tr class="comment-count-row">
                                <td>评论总数</td>
                                <!-- 动态生成评论数 -->
                            </tr>
                            <tr class="comments-row">
                                <td>评论列表</td>
                                <!-- 动态生成评论列表 -->
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast 通知 -->
    <div id="toast" class="toast hidden">
        <div class="toast-content">
            <svg class="toast-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 13L9 17L19 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span id="toastMessage"></span>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
